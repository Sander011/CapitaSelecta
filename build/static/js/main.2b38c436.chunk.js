(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{64:function(e,t,a){e.exports=a(90)},69:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),c=(a(69),a(14)),o=a(23),s=a.n(o),u=a(125),m=a(126),p=a(127),d=a(119),h=a(124),f=a(132),b=a(129),y=a(36),E=a(25),g=a(123),v=a(128),x=a(131),w=a(133),j=a(4),O="Enter feature values and press explain to start!",C={container:{display:"flex",flexDirection:"row",flexGrow:"1",justifyContent:"space-evenly",alignItems:"center"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"150px",justifyContent:"space-evenly"},leftColumn:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",width:"50%",height:"70vh",margin:"50px"},rightColumn:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"50%",height:"70vh",margin:"50px"},input:{display:"flex",width:"100%",justifyContent:"space-between",margin:"10px"},inputText:{width:"10vw"},inputChanger:{width:"20vw",display:"flex"},sliderText:{marginLeft:"25px",width:"25px"},options:{display:"flex",flexDirection:"column",alignItems:"center"},text:{textAlign:"center",margin:"5px"}},S=Object(j.a)(C)((function(e){var t=e.classes,a=e.features,l=e.valuesPerFeature,i=e.boundsPerFeature,o=e.setError,u=e.setSamples,m=Object(n.useState)({}),p=Object(c.a)(m,2),f=p[0],b=p[1],j=Object(n.useState)(!1),S=Object(c.a)(j,2),k=S[0],D=S[1],N=Object(n.useState)(void 0),I=Object(c.a)(N,2),K=I[0],T=I[1],P=Object(n.useState)(""),L=Object(c.a)(P,2),M=L[0],_=L[1],F=Object(n.useState)(O),z=Object(c.a)(F,2),G=z[0],R=z[1],A=Object(n.useState)(!1),B=Object(c.a)(A,2),W=B[0],H=B[1],J=Object(n.useState)([]),Y=Object(c.a)(J,2),$=Y[0],q=Y[1],Q=Object(n.useState)(!1),U=Object(c.a)(Q,2),V=U[0],X=U[1],Z=Object(n.useState)(!1),ee=Object(c.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(c.a)(ne,2),le=re[0],ie=re[1],ce=function(){R(O),_(""),q([]),X(!1),ae(!1),T(void 0),H(!1)},oe=function(e,t){ce(),b(Object(E.a)(Object(E.a)({},f),{},Object(y.a)({},e,t)))},se=function(e){if(e in l)return r.a.createElement(v.a,{value:f[e]||l[e][0],onChange:function(t){return oe(e,t.target.value)},style:C.inputChanger},l[e].map((function(e){return r.a.createElement(x.a,{key:e,value:e},e)})));if(e in i){var t=parseInt(i[e][0]),a=parseInt(i[e][1]);return r.a.createElement("div",{style:C.inputChanger},r.a.createElement(w.a,{min:t,max:a,marks:[{value:t,label:t},{value:a,label:a}],step:1,valueLabelDisplay:"auto",value:f[e]||t,onChange:function(t,a){return oe(e,a)}}),r.a.createElement(d.a,{style:C.sliderText},f[e]||t))}};return r.a.createElement("div",{style:C.container},r.a.createElement("div",{style:C.leftColumn},a.length>0?a.map((function(e){return r.a.createElement("div",{key:e,style:C.input},r.a.createElement(d.a,{style:C.inputText},e),se(e))})):r.a.createElement(g.a,{style:{margin:"auto"},size:40,color:"primary"})),r.a.createElement("div",{style:C.rightColumn},r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){return function(){if(!k&&G===O){D(!0),ce();var e={};a.forEach((function(t){t in l&&(e[t]=f[t]||l[t][0]),t in i&&(e[t]=f[t]||i[t][0])})),s.a.get("/api/datasets/predict_adult/",{params:{sample:e}}).then((function(e){var t=e.data.explanation,a=(t=(t=(t=(t=(t=t.replace("predicted","predicted that this adult has an income")).replace(/<=/gi,"\u2264")).replace(/>=/gi,"\u2265")).replace(/\/=/gi,"\u2260")).replace(/'/gi,"")).split("because")[1].split("and");T("".concat(t.split("because")[0]," because ").concat(a[0])),q(a),R(t.split(" instead")[0])})).catch((function(){o("Something went wrong while predicting the sample. Please try another sample or come back later.")})).finally((function(){return D(!1)}))}}()},className:t.button,variant:"contained",color:G!==O?"primary":"secondary"},k?r.a.createElement(g.a,{size:20,color:"white"}):r.a.createElement(d.a,null,"Predict")),r.a.createElement(d.a,{style:C.text},k?"Predicting sample...":G)),G&&G!==O&&r.a.createElement(h.a,{className:t.button,variant:"contained",onClick:function(){return ae(!0)},color:te?"primary":""},r.a.createElement(d.a,{variant:"p"},"Why ",G.split("income ")[1],"?")),te&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{style:C.text},K),r.a.createElement(d.a,{onClick:function(){return X(!V)},style:Object(E.a)(Object(E.a)({},C.text),{},{textDecoration:"underline",cursor:"pointer"})},$.length>1?"show ".concat(V?"less":"more"," rules"):""),r.a.createElement(d.a,{style:Object(E.a)(Object(E.a)({},C.text),{},{whiteSpace:"pre-wrap"})},V&&$.slice(1).join("\n"))),te&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{style:C.text},"What did you think the income of this adult was?"),r.a.createElement("div",{className:t.controls},r.a.createElement(h.a,{className:t.button,variant:"contained",color:"\u226450K"===M?"primary":"",onClick:function(){return _("\u226450K")},disabled:">50K"===M},r.a.createElement(d.a,null,"\u226450K")),r.a.createElement(h.a,{className:t.button,variant:"contained",color:">50K"===M?"primary":"",onClick:function(){return _(">50K")},disabled:"\u226450K"===M},r.a.createElement(d.a,null,">50K")))),M&&M!==G.split("income ")[1]&&r.a.createElement("div",{style:C.options},r.a.createElement(d.a,{style:C.text},"You seem to disagree with the model, would you like to walk through some related samples in order to improve the model?"),r.a.createElement("div",{className:t.controls},r.a.createElement(h.a,{className:t.button,variant:"contained",color:le?"primary":"",onClick:function(){return function(){var e={};ie(!0),a.forEach((function(t){t in l&&(e[t]=f[t]||l[t][0]),t in i&&(e[t]=f[t]||i[t][0])})),s.a.get("/api/datasets/nearby_samples/",{params:{sample:e}}).then((function(e){return u(e.data.data)})).catch((function(){o("Something went wrong while updating. Please try again or come back later.")}))}()},disabled:W},le?r.a.createElement(g.a,{size:20,color:"white"}):r.a.createElement(d.a,null,"Yes")),r.a.createElement(h.a,{className:t.button,variant:"contained",color:W?"primary":"",onClick:function(){return H(!0)},disabled:le},r.a.createElement(d.a,null,"No")))),(W||M===G.split("income ")[1])&&r.a.createElement(d.a,{style:C.text},"Great! Enter new details to try again.")))})),k={overlay:{width:"100%",height:"100%",background:"#eeeeee",display:"flex",justifyContent:"center",alignItems:"center"},popup:{background:"white",display:"flex",flexDirection:"column",padding:"1rem",width:"400px",alignItems:"center",borderRadius:"20px",boxShadow:"2px 2px 2px 2px #cccccc"},innerDiv:{display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"5px"},popupText:{margin:0,fontSize:"1.5rem"},popupLabel:{textAlign:"center",fontSize:"1.5rem"},description:{textAlign:"center",margin:0}},D=Object(j.a)(k)((function(e){var t=e.classes,a=e.features,l=e.restart,i=e.samples,o=e.setError,u=Object(n.useState)(0),m=Object(c.a)(u,2),p=m[0],f=m[1],b=Object(n.useState)(!1),y=Object(c.a)(b,2),E=y[0],g=y[1],v=function(e){g(!0);var t={};a.forEach((function(e,a){t[e]=0===a?Math.max(17,Math.round(i[p][a])):5===a?Math.max(0,Math.round(i[p][5])):i[p][a]})),s.a.get("/api/datasets/update_model/",{params:{sample:t,prediction:e}}).then((function(){p+1===i.length&&l(),f(p+1)})).catch((function(){return o("Something went wrong while updating. Please try again or come back later.")})).finally((function(){return g(!1)}))};return r.a.createElement("div",{style:k.overlay},r.a.createElement("div",{style:k.popup},r.a.createElement("h1",null,"Model updater"),r.a.createElement("p",{style:k.description},"In order to properly update the model we will show you some samples closely related to the previously classified sample. Please indicate as what this sample should be classified so we can update the model accordingly."),r.a.createElement("h2",null,"Sample ",p+1," / ",i.length),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Age"),r.a.createElement("p",{style:k.popupText},Math.max(17,Math.round(i[p][0])))),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Occupation"),r.a.createElement("p",{style:k.popupText},i[p][1])),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Relationship"),r.a.createElement("p",{style:k.popupText},i[p][2])),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Race"),r.a.createElement("p",{style:k.popupText},i[p][3])),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Sex"),r.a.createElement("p",{style:k.popupText},i[p][4])),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Hours per week"),r.a.createElement("p",{style:k.popupText},Math.max(0,Math.round(i[p][5])))),r.a.createElement("div",{style:k.innerDiv},r.a.createElement("label",{style:k.popupLabel},"Native country"),r.a.createElement("p",{style:k.popupText},i[p][6])),r.a.createElement("div",{className:t.controls},r.a.createElement(h.a,{className:t.button,variant:"contained",color:"secondary",onClick:function(){return v("\u226450K")},disabled:E},r.a.createElement(d.a,null,"\u226450K")),r.a.createElement(h.a,{className:t.button,variant:"contained",color:"secondary",onClick:function(){return v(">50K")},disabled:E},r.a.createElement(d.a,null,">50K")))))})),N=Object(u.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},button:{width:"10rem",height:"3rem",padding:"1rem",borderRadius:"1rem",margin:"1rem"},controls:{display:"flex",flexDirection:"row",width:"30vw",alignItems:"center",justifyContent:"space-evenly"}}})),I=function(){var e=N(),t=Object(n.useState)(void 0),a=Object(c.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)([]),u=Object(c.a)(o,2),y=u[0],E=u[1],g=Object(n.useState)([]),v=Object(c.a)(g,2),x=v[0],w=v[1],j=Object(n.useState)({}),O=Object(c.a)(j,2),C=O[0],k=O[1],I=Object(n.useState)({}),K=Object(c.a)(I,2),T=K[0],P=K[1];return Object(n.useEffect)((function(){s.a.get("/api/datasets/retrieve_adult/").then((function(e){w(e.data.features),k(e.data.values_per_category),P(e.data.bounds_per_feature)})).catch((function(e){return i("Something went wrong while fetching the dataset. Please try another dataset or come back later.")}))}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(m.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(d.a,{variant:"h6",className:e.title},"Constrastive explanations"),y.length>0&&r.a.createElement(h.a,{onClick:function(){return E([])},color:"inherit"},"Go back"))),y.length>0?r.a.createElement(D,{restart:function(){return E([])},features:x,classes:e,setError:i,samples:y}):r.a.createElement(S,{features:x,valuesPerFeature:C,boundsPerFeature:T,classes:e,setError:i,setSamples:E}),r.a.createElement(f.a,{open:void 0!==l,autoHideDuration:6e3,onClose:function(){return i(void 0)}},r.a.createElement(b.a,{onClose:function(){return i(void 0)},severity:"error"},l)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.2b38c436.chunk.js.map