(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{214:function(e,t,a){e.exports=a(327)},219:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),i=a.n(r),o=(a(219),a(13)),c=a(77),s=a(31),u=a.n(s),m=a(180),d=a(139),p=a(161),f=a(179),h=a(188),g=a(185),v=a(186),b=a(369),y=a(5),E=a(368),j=a(189),w=a.n(j),x={predictButton:{width:"15rem",height:"5rem",padding:"1rem",borderRadius:"1rem"},container:{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"space-evenly",alignItems:"center",padding:"1rem"},controls:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"space-evenly"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"150px",justifyContent:"space-evenly"}},O=function(e,t){return e.map((function(e){return"tableData"!==e?{title:e,field:e,lookup:Object.keys(t).includes(e)?t[e].reduce((function(e,t){return e[t]=t,e}),{}):void 0,filterCellStyle:Object.keys(t).includes(e)?void 0:{paddingTop:"32px"}}:void 0})).filter((function(e){return void 0!==e}))},C=function(e){return u.a.get("/api/datasets/".concat(e,"/retrieve_samples/"))},k=Object(y.a)(x)((function(e){var t=e.classes,a=e.datasetId,r=Object(n.useState)(void 0),i=Object(o.a)(r,2),s=i[0],y=i[1],j=Object(n.useState)(void 0),k=Object(o.a)(j,2),S=k[0],_=k[1],D=Object(n.useState)(!1),I=Object(o.a)(D,2),N=I[0],B=I[1],T=Object(n.useState)(void 0),R=Object(o.a)(T,2),G=R[0],P=R[1],z=Object(n.useState)([]),K=Object(o.a)(z,2),M=K[0],W=K[1],H=Object(n.useState)([]),Y=Object(o.a)(H,2),A=Y[0],$=Y[1],q=Object(n.useState)({}),F=Object(o.a)(q,2),J=F[0],L=F[1],V=Object(n.useState)(void 0),Z=Object(o.a)(V,2),Q=Z[0],U=Z[1],X=Object(n.useState)(void 0),ee=Object(o.a)(X,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){var e;return u.a.all([(e=a,u.a.get("/api/datasets/".concat(e))),C(a)]).then(u.a.spread((function(e,t){y(e.data),W(t.data.samples),$(Object(c.a)(t.data.samples)),L(t.data.categorical_values)}))).catch((function(e){return _("Something went wrong while fetching the dataset. Please try another dataset or come back later.")})),function(){P(""),W([]),$([]),_(void 0),y(void 0),ae(void 0),U(void 0)}}),[a]);return l.a.createElement("div",{style:x.container},A.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{title:s.title,data:A,options:{pageSize:10,pageSizeOptions:[5,10,20,100],maxBodyHeight:"55vh",filtering:!0,rowStyle:function(e){return{backgroundColor:null!=Q&&Q.tableData.id===e.tableData.id&&"#3f51b5",color:null!=Q&&Q.tableData.id===e.tableData.id&&"white"}}},style:{width:"95vw"},columns:O(Object.keys(A[0]),J),onRowClick:function(e,t){return U(t),void ae(void 0)}}),l.a.createElement("div",{style:x.controls},l.a.createElement(m.a,{className:t.predictButton,variant:"contained",color:"primary",onClick:function(){A.length===M.length?$(M.filter((function(e){return e.model_predictions!==e.label}))):$(Object(c.a)(M))}},l.a.createElement(d.a,null,"Show"," ",M.length===A.length?"only incorrect model predictions":"all")),l.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){N||(B(!0),u.a.get("/api/datasets/".concat(a,"/predict_sample/"),{params:{sampleId:M.indexOf(A[Q.tableData.id]),foilClass:te}}).then((function(e){P(e.data),B(!1)})).catch((function(e){_("Something went wrong while predicting the sample. Please try another sample or come back later."),B(!1)})))},className:t.predictButton,disabled:!Q},N?l.a.createElement(p.a,{size:26,color:"white"}):l.a.createElement(d.a,null,"Explain sample")),l.a.createElement(f.a,{style:{width:"15rem"},disabled:!Q},l.a.createElement(h.a,null,"Foil class"),l.a.createElement(g.a,{value:te,onChange:function(e){return ae(e.target.value)}},J.label&&J.label.filter((function(e){return Q&&Q.model_predictions!==e})).map((function(e){return l.a.createElement(v.a,{key:e,value:e},e)}))))),l.a.createElement(d.a,{align:"center",variant:"h4"},N?"Explaining...":G||"Select a sample to explain and (optionally) the class with which it should be compared.")):l.a.createElement("div",{style:x.loadingContainer},l.a.createElement(p.a,null),l.a.createElement(d.a,{variant:"h4"},"Retrieving and predicting samples...")),l.a.createElement(b.a,{open:null!=S,autoHideDuration:6e3,onClose:function(){return _(void 0)}},l.a.createElement(E.a,{onClose:function(){return _(void 0)},severity:"error"},S)))})),S=a(365),_=a(367),D=a(165),I=a(122),N=a(74),B=a(342),T="Enter an email and press explain to start!",R={button:{width:"10rem",height:"3rem",padding:"1rem",borderRadius:"1rem",margin:"1rem"},container:{display:"flex",flexDirection:"row",flexGrow:"1",justifyContent:"space-evenly",alignItems:"center",padding:"1rem"},controls:{display:"flex",flexDirection:"row",width:"30vw",alignItems:"center",justifyContent:"space-evenly"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"150px",justifyContent:"space-evenly"},rightColumn:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"50%",height:"70vh",margin:"50px"},options1:{display:"flex",flexDirection:"column",alignItems:"center"},text:{textAlign:"center",margin:"5px"}},G=["make","address","all","3d","our","over","remove","internet","order","mail","receive","will","people","report","addresses","free","business","email","you","credit","your","font","000","money","hp","hpl","george","650","lab","labs","telnet","857","data","415","85","technology","1999","parts","pm","direct","cs","meeting","original","project","re","edu","table","conference"],P=[";","(","[","!","$","#"],z={";":"%3B","(":"%2B","[":"%5B","!":"%21",$:"%24","#":"%23"},K=function(e){var t=" ".concat(e," "),a=G.map((function(e){return(t.match(new RegExp("(\\W+".concat(e,"\\W+)"),"gi"))||[]).length})),n=P.map((function(e){return(t.match(new RegExp("[".concat(e,"]"),"g"))||[]).length})),l=(t.match(/([A-Z]+)/g)||[]).map((function(e){return e.length})),r=Math.max.apply(Math,Object(c.a)(l).concat([0])),i=l.reduce((function(e,t){return e+t}),0);return[a,n,r,i,i/l.length||0]},M=function(e,t,a,n,l){var r=G.map((function(t,a){return Object(N.a)({},"word_freq_".concat(t),e[a])})).reduce((function(e,t){return e[Object.keys(t)[0]]=Object.values(t)[0],e}),{}),i=P.map((function(e,a){return Object(N.a)({},"char_freq_".concat(z[e]),t[a])})).reduce((function(e,t){return e[Object.keys(t)[0]]=Object.values(t)[0],e}),{});return Object(I.a)({},r,{},i,{capital_run_length_average:l,capital_run_length_longest:a,capital_run_length_total:n})},W=Object(y.a)(R)((function(e){var t=e.classes,a=Object(n.useState)(void 0),r=Object(o.a)(a,2),i=r[0],s=r[1],f=Object(n.useState)(void 0),h=Object(o.a)(f,2),g=h[0],v=h[1],y=Object(n.useState)(!1),j=Object(o.a)(y,2),w=j[0],x=j[1],O=Object(n.useState)(T),C=Object(o.a)(O,2),k=C[0],S=C[1],_=Object(n.useState)(void 0),D=Object(o.a)(_,2),I=D[0],N=D[1],G=Object(n.useState)(void 0),P=Object(o.a)(G,2),z=P[0],W=P[1],H=Object(n.useState)(!1),Y=Object(o.a)(H,2),A=Y[0],$=Y[1],q=Object(n.useState)(!1),F=Object(o.a)(q,2),J=F[0],L=F[1];return l.a.createElement("div",{style:R.container},l.a.createElement(B.a,{"aria-label":"minimum height",rowsMax:50,rowsMin:50,placeholder:"Enter some email here...",onChange:function(e){return s(e.target.value)},value:i,style:{resize:"none",width:"50%",overflowY:"scroll",maxHeight:"70vh",margin:"50px"}}),l.a.createElement("div",{style:R.rightColumn},l.a.createElement("div",null,l.a.createElement(m.a,{onClick:function(){w||(x(!0),S(T),W(void 0),N(void 0),u.a.get("/api/datasets/44/predict_spam/",{params:{sample:M.apply(void 0,Object(c.a)(K(i)))}}).then((function(e){S(e.data.explanation),W(e.data.prediction),x(!1)})).catch((function(e){v("Something went wrong while predicting the sample. Please try another sample or come back later."),x(!1)})))},className:t.button,variant:"contained",color:"secondary"},w?l.a.createElement(p.a,{size:20,color:"white"}):l.a.createElement(d.a,null,"Explain"))),l.a.createElement(d.a,{style:R.text},w?"Explaining sample...":k.replace("'1'","spam").replace("'0'","not spam")),k!==T&&l.a.createElement("div",{style:R.options1},l.a.createElement("div",null,l.a.createElement(d.a,null,"The model classified the email as ","0"===z?"not spam":"spam")),l.a.createElement(d.a,null,"What did you think this email was?"),l.a.createElement("div",{style:R.controls},l.a.createElement(m.a,{className:t.button,variant:"contained",color:"1"===I?"primary":"",onClick:function(){return N("1")}},l.a.createElement(d.a,null,"Spam")),l.a.createElement(m.a,{className:t.button,variant:"contained",color:"0"===I?"primary":"",onClick:function(){return N("0")}},l.a.createElement(d.a,null,"Not spam"))),I&&(I!==z?l.a.createElement("div",{style:R.options1},l.a.createElement(d.a,null,"You seem to disagree with the model, would you like to retrain the model using this new information?"),l.a.createElement("div",{style:R.controls},l.a.createElement(m.a,{className:t.button,variant:"contained",color:"secondary",onClick:function(){u.a.get("/api/datasets/44/update_model/",{params:{sample:M.apply(void 0,Object(c.a)(K(i))),prediction:z}}).then((function(e){return $(!0)})).catch((function(e){v("Something went wrong while updating the model. Please try again or come back later.")}))}},l.a.createElement(d.a,null,"Yes")),l.a.createElement(m.a,{className:t.button,variant:"contained",color:"",onClick:function(){return L(!0)}},l.a.createElement(d.a,null,"No")))):l.a.createElement(d.a,null,"Great! The model agrees with you. Enter a new email to try again.")),l.a.createElement("div",{style:R.options1},A&&l.a.createElement(d.a,null,"Model successfully updated! Enter a new email to try again."),J&&l.a.createElement(d.a,null,"That's fine! Enter a new email to try again.")))),l.a.createElement(b.a,{open:null!=g,autoHideDuration:6e3,onClose:function(){return v(void 0)}},l.a.createElement(E.a,{onClose:function(){return v(void 0)},severity:"error"},g)))})),H=a(371),Y="Enter feature values and press explain to start!",A={button:{width:"10rem",height:"3rem",padding:"1rem",borderRadius:"1rem",margin:"1rem"},container:{display:"flex",flexDirection:"row",flexGrow:"1",justifyContent:"space-evenly",alignItems:"center",padding:"1rem"},controls:{display:"flex",flexDirection:"row",width:"30vw",alignItems:"center",justifyContent:"space-evenly"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"150px",justifyContent:"space-evenly"},leftColumn:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",width:"50%",height:"70vh",margin:"50px"},rightColumn:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"50%",height:"70vh",margin:"50px"},input:{display:"flex",width:"100%",justifyContent:"space-between",margin:"10px"},inputText:{width:"10vw"},inputChanger:{width:"20vw",display:"flex"},sliderText:{marginLeft:"25px",width:"25px"},options1:{display:"flex",flexDirection:"column",alignItems:"center"},text:{textAlign:"center",margin:"5px"}},$=Object(y.a)(A)((function(e){var t=e.classes,a=Object(n.useState)([]),r=Object(o.a)(a,2),i=r[0],c=r[1],s=Object(n.useState)({}),f=Object(o.a)(s,2),h=f[0],y=f[1],j=Object(n.useState)({}),w=Object(o.a)(j,2),x=w[0],O=w[1],C=Object(n.useState)({}),k=Object(o.a)(C,2),S=k[0],_=k[1],D=Object(n.useState)(void 0),B=Object(o.a)(D,2),T=B[0],R=B[1],G=Object(n.useState)(!1),P=Object(o.a)(G,2),z=P[0],K=P[1],M=Object(n.useState)(Y),W=Object(o.a)(M,2),$=W[0],q=W[1],F=Object(n.useState)(void 0),J=Object(o.a)(F,2),L=J[0],V=J[1],Z=Object(n.useState)(void 0),Q=Object(o.a)(Z,2),U=Q[0],X=Q[1],ee=Object(n.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(!1),re=Object(o.a)(le,2),ie=re[0],oe=re[1];Object(n.useEffect)((function(){var e;return u.a.all([(e=1590,u.a.get("/api/datasets/".concat(e,"/retrieve_adult/")))]).then(u.a.spread((function(e){c(e.data.features),y(e.data.values_per_category),O(e.data.bounds_per_feature)}))).catch((function(e){return R("Something went wrong while fetching the dataset. Please try another dataset or come back later.")})),function(){R(void 0),c(void 0)}}),[]);var ce=function(e,t){K(!1),q(Y),X(void 0),V(void 0),_(Object(I.a)({},S,Object(N.a)({},e,t)))};return l.a.createElement("div",{style:A.container},l.a.createElement("div",{style:A.leftColumn},i.map((function(e){return l.a.createElement("div",{key:e,style:A.input},l.a.createElement(d.a,{style:A.inputText},e),function(e){if(e in h)return l.a.createElement(g.a,{value:S[e]||h[e][0],onChange:function(t){return ce(e,t.target.value)},style:A.inputChanger},h[e].map((function(e){return l.a.createElement(v.a,{key:e,value:e},e)})));if(e in x){var t=parseInt(x[e][0]),a=parseInt(x[e][1]);return l.a.createElement("div",{style:A.inputChanger},l.a.createElement(H.a,{min:t,max:a,marks:[{value:t,label:t},{value:a,label:a}],step:1,valueLabelDisplay:"auto",value:S[e]||t,onChange:function(t,a){return ce(e,a)}}),l.a.createElement(d.a,{style:A.sliderText},S[e]||t))}}(e))}))),l.a.createElement("div",{style:A.rightColumn},l.a.createElement("div",null,l.a.createElement(m.a,{onClick:function(){return function(){if(!z){K(!0),q(Y),X(void 0),V(void 0);var e={};i.forEach((function(t){t in h&&(e[t]=S[t]||h[t][0]),t in x&&(e[t]=S[t]||x[t][0])})),u.a.get("/api/datasets/1590/predict_adult/",{params:{sample:e}}).then((function(e){q(e.data.explanation),X(e.data.prediction),K(!1)})).catch((function(e){R("Something went wrong while predicting the sample. Please try another sample or come back later."),K(!1)}))}}()},className:t.button,variant:"contained",color:"secondary"},z?l.a.createElement(p.a,{size:20,color:"white"}):l.a.createElement(d.a,null,"Explain"))),l.a.createElement(d.a,{style:A.text},z?"Explaining sample...":$.replace("'1'","spam").replace("'0'","not spam")),$!==Y&&l.a.createElement("div",{style:A.options1},l.a.createElement(d.a,null,"What did you think this person was?"),l.a.createElement("div",{style:A.controls},l.a.createElement(m.a,{className:t.button,variant:"contained",color:"<=50K"===L?"primary":"",onClick:function(){return V("<=50K")}},l.a.createElement(d.a,null,"<=50K")),l.a.createElement(m.a,{className:t.button,variant:"contained",color:">50K"===L?"primary":"",onClick:function(){return V(">50K")}},l.a.createElement(d.a,null,">50K"))),L&&(L!==U?l.a.createElement("div",{style:A.options1},l.a.createElement(d.a,null,"You seem to disagree with the model, would you like to retrain the model using this new information?"),l.a.createElement("div",{style:A.controls},l.a.createElement(m.a,{className:t.button,variant:"contained",color:"secondary",onClick:function(){return function(){var e={};i.forEach((function(t){t in h&&(e[t]=S[t]||h[t][0]),t in x&&(e[t]=S[t]||x[t][0])})),u.a.get("/api/datasets/1590/update_model/",{params:{sample:e,prediction:L}}).then((function(e){return ne(!0)})).catch((function(e){R("Something went wrong while updating the model. Please try again or come back later.")}))}()}},l.a.createElement(d.a,null,"Yes")),l.a.createElement(m.a,{className:t.button,variant:"contained",color:"",onClick:function(){return oe(!0)}},l.a.createElement(d.a,null,"No")))):l.a.createElement(d.a,null,"Great! The model agrees with you. Enter new details to try again.")),l.a.createElement("div",{style:A.options1},ae&&l.a.createElement(d.a,null,"Model successfully updated! Enter new details to try again."),ie&&l.a.createElement(d.a,null,"That's fine! Enter new details to try again.")))),l.a.createElement(b.a,{open:null!=T,autoHideDuration:6e3,onClose:function(){return R(void 0)}},l.a.createElement(E.a,{onClose:function(){return R(void 0)},severity:"error"},T)))})),q=Object(S.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),F=function(){var e=q(),t=Object(n.useState)(1590),a=Object(o.a)(t,2),r=a[0],i=a[1];return l.a.createElement("div",{className:e.root},l.a.createElement(_.a,{position:"static"},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h6",className:e.title},"Constrastive explanations"),l.a.createElement(m.a,{onClick:function(){return i(1590)},color:"inherit"},"Adult"),l.a.createElement(m.a,{onClick:function(){return i(31)},color:"inherit"},"Credit-g"),l.a.createElement(m.a,{onClick:function(){return i(44)},color:"inherit"},"Spam"),l.a.createElement(m.a,{onClick:function(){return i(54)},color:"inherit"},"Vehicle"))),44===r?l.a.createElement(W,null):1590===r?l.a.createElement($,null):l.a.createElement(k,{datasetId:r}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[214,1,2]]]);
//# sourceMappingURL=main.94cb793b.chunk.js.map